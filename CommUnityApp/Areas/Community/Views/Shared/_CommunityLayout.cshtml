<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Indian Community</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

    <style>
        :root {
            --sidebar-bg: #020617;
            --sidebar-hover: #111827;
            --primary: #4f46e5;
        }


        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden;
            font-family: Inter, system-ui;
        }


        .layout {
            display: flex;
            height: 100vh;
        }


        .sidebar {
            width: 260px;
            background: var(--sidebar-bg);
            color: #fff;
            padding: 24px 18px;
            flex-shrink: 0;
            transition: all .3s ease;
        }

            .sidebar.collapsed {
                width: 0;
                padding: 0;
                overflow: hidden;
            }

        .brand {
            font-size: 22px;
            font-weight: 900;
            margin-bottom: 30px;
        }

        .nav a {
            display: flex;
            gap: 12px;
            padding: 12px 14px;
            border-radius: 12px;
            color: #c7d2fe;
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 6px;
        }

            .nav a:hover {
                background: var(--sidebar-hover);
                color: #fff;
            }


        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }


        .topbar {
            height: 64px;
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            flex-shrink: 0;
        }

        .top-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .menu-btn {
            font-size: 20px;
            background: none;
            border: none;
            cursor: pointer;
        }

        .page-title {
            font-weight: 800;
        }

        .user-btn {
            background: none;
            border: none;
            font-weight: 700;
            cursor: pointer;
        }


        .content {
            flex: 1;
            overflow-y: auto;
            padding: 40px 32px;
            background: linear-gradient(180deg,#eef2ff,#f8fafc);
        }


        .footer {
            height: 48px;
            background: #fff;
            border-top: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            color: #64748b;
        }


        @@media (max-width: 768px) {

            .sidebar {
                position: fixed;
                top: 0;
                left: -260px;
                height: 100vh;
                z-index: 1100;
                box-shadow: 4px 0 30px rgba(0,0,0,.3);
            }

                .sidebar.open {
                    left: 0;
                }

                .sidebar.collapsed {
                    width: 260px;
                    padding: 24px 18px;
                }

            .mobile-overlay {
                position: fixed;
                inset: 0;
                background: rgba(15,23,42,.55);
                z-index: 1000;
                display: none;
            }

                .mobile-overlay.show {
                    display: block;
                }
        }
    </style>
</head>

<body>

    <!-- MOBILE OVERLAY -->
    <div class="mobile-overlay" id="overlay" onclick="closeSidebar()"></div>

    <div class="layout">

        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <h3>🏛 @Context.Session.GetString("CommunityName")</h3>

            <nav class="nav">
                <a href="/Home" onclick="closeSidebar()">🏠 Dashboard</a>
                <a href="/Community/Home/ViewEvents" onclick="closeSidebar()">📅 Events</a>
                <a href="/Community/Home/AddEvent" onclick="closeSidebar()">➕ Create Event</a>
                <a href="/Member" onclick="closeSidebar()">👥 Members</a>
                <a href="/Settings" onclick="closeSidebar()">⚙️ Settings</a>
            </nav>
        </aside>

        <!-- MAIN -->
        <div class="main">

            <!-- TOPBAR -->
            <header class="topbar">
                <div class="top-left">
                    <button class="menu-btn" onclick="toggleSidebar()">☰</button>
                    <span class="page-title">@ViewData["Title"]</span>
                </div>

                <div class="dropdown">
                    <button class="user-btn" data-bs-toggle="dropdown">
                        👤 Admin
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <a class="dropdown-item" href="/Account/Logout">
                                🚪 Logout
                            </a>
                        </li>
                    </ul>
                </div>
            </header>

            <!-- CONTENT -->
            <main class="content">
                @RenderBody()
            </main>

            <!-- FOOTER -->
            <footer class="footer">
                © 2026 Indian Community. All rights reserved.
            </footer>

        </div>
    </div>

    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const sidebar = document.getElementById("sidebar");
        const overlay = document.getElementById("overlay");

        function toggleSidebar() {
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle("open");
                overlay.classList.toggle("show");
            } else {
                sidebar.classList.toggle("collapsed");
            }
        }

        function closeSidebar() {
            sidebar.classList.remove("open");
            overlay.classList.remove("show");
        }
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>